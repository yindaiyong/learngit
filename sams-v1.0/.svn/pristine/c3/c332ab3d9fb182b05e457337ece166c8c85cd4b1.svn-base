<%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%>
<%@ include file="/WEB-INF/views/include/common.jsp"%>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css"> .dialog-button { padding: 5px; text-align: center; /*background-color: #E0ECFF;*/ } </style>
    <head>
        <title>查看业务取值对应的sql</title>

        <script type="text/javascript">
            var dataGrid = "";
            $(function(){
                //加载页面表格
                dataGrid = $("#aa").datagrid({
                    url : '',
                    striped : true,
                    pagination : true,
                    pageSize : 100,
                    pageList : [100, 200, 300,
                        400, 500 ],
                    columns : [[ {
                        title : '序号',
                        field : 'id',
                        width : 80,
                        halign : 'center',
                        align : 'center'
                    },{
                        title : '查询名称',
                        field : 'name',
                        width : 100,
                        halign : 'center',
                        align : 'center'
                    },{
                        title : '查看',
                        field : 'look',
                        width : 100,
                        halign : 'center',
                        align : 'center',
                        formatter : function(value){
                            return "<a href='#'>查看</a>";
                        }
                    },{
                        title : '',
                        field : 'url',
                        width : 100,
                        halign : 'center',
                        align : 'center',
                        hidden:true,
                    }
                    ]],
                    //点击单元格
                    onClickCell : function(rowIndex, field, value){
                        if("look" != field){
                            return false;
                        }

                        var rows = $("#aa").datagrid("getRows");
                        var row = rows[rowIndex];//rowIndex为行号
                        var url = row.url;
                        // var title = row.name;
                        window.open('${ctx}'+url);
                    }
                });
                $.getJSON("${ctx}/sql/list.json",function (data) {
                    // console.log(data);
                    $('#aa').datagrid('loadData',data);
                });

            });
        </script>
    </head>
<body class="easyui-layout" data-options="fit:true,border:false">
<div data-options="region:'center',border:true,title:'日终处理列表'" >
    <table id="aa" data-options="fit:true,border:false"></table>
</div>
</body>
</html>